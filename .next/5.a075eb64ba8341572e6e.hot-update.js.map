{"version":3,"file":"5.a075eb64ba8341572e6e.hot-update.js","sources":["webpack:///pages/campaigns/requests/index.js"],"sourcesContent":["import React,{Component} from 'react';\nimport Layout from '../../../components/layout';\nimport { Button , Table } from 'semantic-ui-react';\nimport { Link } from '../../../routes';\nimport Campaign from '../../../ethereum/campaign';\nimport RequestRow from '../../../components/RequestRow';\n\nclass RequestIndex extends Component{\n\n    static async getInitialProps(props)\n    {\n        const {address} = props.query;\n        const campaign = Campaign(address);\n        const requestCount = await campaign.methods.getRequestsCount().call();\n\n        const requests = await Promise.all(\n            Array(parseInt(requestCount)).fill().map((element, index) => {\n                return campaign.methods.requests(index).call()\n            })//Incrementing Index and Iterating over Call Method\n        );\n\n        const details = campaign.methods.getSummary().call();\n        const requestsCount = details[2];\n        const approversCount =details[3];\n        \n        console.log(requests);\n        return {\n            address,\n            requests,\n            requestsCount,\n            approversCount\n            };\n    }\n\n    renderRows(){\n            return this.props.requests.map((request, index) => {\n                return (<RequestRow \n                    key = {index}\n                    id = {index}    \n                    request = {request}\n                    address = {this.props.address}\n                    approversCount = {this.props.approversCount}\n                />\n                );\n            });\n    }\n\n    render(){\n\n        const {Header , Row , HeaderCell , Body} = Table;\n\n        return(\n                <Layout>\n               {console.log(this.props.address)}\n                <Link route = {`/campaigns/${this.props.address}/requests/new`}>\n                <a>\n                    <Button primary>\n                        Requests\n                    </Button>\n\n                    </a>\n                </Link>\n                <Table>\n                    <Header>\n                        <Row>\n                            <HeaderCell>ID</HeaderCell>\n                            <HeaderCell>Description</HeaderCell>\n                            <HeaderCell>Amount</HeaderCell>\n                            <HeaderCell>Recipient</HeaderCell>\n                            <HeaderCell>Approval Count</HeaderCell>\n                            <HeaderCell>Approve</HeaderCell>\n                            <HeaderCell>Finalize</HeaderCell>\n                            </Row>\n                        </Header>\n                        <Body>\n                               {this.renderRows()}\n                            </Body>\n\n                    </Table>\n                </Layout>\n        );\n    }\n}\n\nexport default RequestIndex;\n\n\n// WEBPACK FOOTER //\n// pages/campaigns/requests/index.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AA2BA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;;;AAxEA;;;;;;AAEA;AACA;;AACA;AACA;;AADA;;AAEA;AAEA;AACA;AAHA;AACA;;AADA;AAMA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;;;;;;;;;;;;;;;;AApBA;AACA;AA4EA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}